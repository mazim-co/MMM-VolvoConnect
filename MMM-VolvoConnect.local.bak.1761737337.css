/* MMM-VolvoConnect — consolidated CSS (cleaned & deduped)
   Scope all rules to the module to avoid collisions. */

/* ===== Root scope ===== */
.volvo-connect { color: #e8eaec; }

/* ===== Card ===== */
.volvo-connect .main-card {
  background: rgba(45,47,50,0.50);
  border: 1px solid rgba(191,165,122,0.15);
  border-radius: 14px;
  padding: 12px 12px 10px;
  box-shadow: 0 4px 22px rgba(0,0,0,0.40);
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-width: 600px;
  margin: 0 auto;
}

/* ===== Cluster layout (no tiles) ===== */
.volvo-connect .vc-cluster { color: #e8eaec; }
.volvo-connect .vc-toprow {
  display: grid;
  grid-template-columns: 1fr 220px; /* left info, right car */
  gap: 8px;
  align-items: center;
}
.volvo-connect .vc-leftstack {
  display: flex; flex-direction: column; gap: 4px; justify-content: center;
}
.volvo-connect .vc-metrics { display: grid; grid-template-columns: 1fr 1fr; gap: 6px 18px; }
.volvo-connect .vc-mrow { display: flex; align-items: center; gap: 8px; line-height: 1; }

/* icons + metric text */
.volvo-connect .vc-icn { width: 16px; height: 16px; opacity: .9; color: #c9c9c9; }
.volvo-connect .vc-metric { font-weight: 700; font-size: 14px; color: #eceff3; }

/* car image box */
.volvo-connect .vc-carbox { display: flex; justify-content: flex-end; align-items: flex-start; }
.volvo-connect .vc-carbox .car-image {
  display: block; /* remove baseline gap */
  max-height: 95px; width: auto;
  object-fit: contain; object-position: center top;
  filter: brightness(1.06) contrast(1.08);
}

/* divider */
.volvo-connect .vc-divider { height: 1px; margin: 2px 0; background: linear-gradient(90deg,#ffffff40,transparent); opacity: .6; }

/* last trip row */
.volvo-connect .vc-lasttrip {
  display: flex; align-items: center; justify-content: space-between;
  flex-wrap: nowrap; gap: 14px; margin-top: 0;
}
.volvo-connect .vc-lt-item { display: flex; align-items: center; gap: 8px; font-weight: 700; font-size: 13px; color: #eceff3; }
.volvo-connect .vc-lt-item .vc-icn { width: 16px; height: 16px; color: #eceff3; opacity: .9; }
/* hide speed item in Last Trip (replaced by location) */
.volvo-connect .vc-lt-item.speed { display: none; }

/* right‑aligned location text */
.volvo-connect .vc-location-info {
  margin-left: auto; font-weight: 600; font-size: 13px; color: #eceff3; opacity: .9; text-align: right;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 60%;
}

/* ===== Fuel bar (minimal; subtle gradients) ===== */
.volvo-connect .fuelbar { position: relative; height: 10px; width: 100%; margin: 4px 0 6px; border-radius: 6px; overflow: hidden;
  background: linear-gradient(90deg, rgba(255,255,255,0.05), rgba(255,255,255,0.12));
  border: 1px solid rgba(255,255,255,0.14);
}
.volvo-connect .fuelbar.slim { height: 10px; }
.volvo-connect .fuelbar-fill { position: relative; height: 100%; width: 0%; transition: width 0.3s ease; border-radius: inherit;
  background: linear-gradient(90deg, #5f5f60 0%, #a3a3a5 50%, #d0d0d2 100%);
}
.volvo-connect .fuelbar-label {
  position: absolute; top: 50%; left: 6px; transform: translateY(-50%);
  display: inline-flex; align-items: center; justify-content: flex-start;
  font-family: "Roboto Mono", monospace; font-size: 11px; font-weight: 600; color: #f3f6f8; letter-spacing: .3px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.5); pointer-events: none;
}

/* ===== Map (inside card) ===== */
.volvo-connect .map-wrap {
  margin-top: 8px; border-radius: 12px; overflow: hidden;
  background: rgba(30,32,34,0.85); border: 1px solid rgba(191,165,122,0.12);
  backdrop-filter: blur(6px) saturate(130%); -webkit-backdrop-filter: blur(6px) saturate(130%);
  box-shadow: 0 4px 20px rgba(0,0,0,0.45); position: relative;
}
.volvo-connect .leaflet-holder { height: 140px; }
.volvo-connect .map-location { position: absolute; bottom: 8px; right: 8px; padding: 4px 8px; border-radius: 8px;
  background: rgba(45,47,50,0.85); border: 1px solid rgba(191,165,122,0.12); color: #e8eaec;
  font-size: 12px; font-weight: 600; }

/* ===== Tiles layout (legacy/fallback) ===== */
.volvo-connect .data-tiles { display: grid; grid-template-columns: repeat(auto-fill, minmax(128px, 1fr)); gap: 6px; }
.volvo-connect .data-tile {
  position: relative; min-height: 36px; flex: 1 1 calc(50% - 8px);
  background: rgba(60,62,65,0.70); border: 1px solid rgba(191,165,122,0.12);
  border-radius: 10px; color: #e8eaec; box-shadow: inset 0 1px 2px rgba(255,255,255,0.05), 0 2px 8px rgba(0,0,0,0.30);
  overflow: hidden; backdrop-filter: blur(6px);
}
.volvo-connect .data-tile .label { position: absolute; top: 4px; left: 6px; font-size: 9px; color: #8d9093; line-height: 1; }
.volvo-connect .data-tile .value { position: absolute; bottom: 4px; right: 6px; font-size: 12px; font-weight: 600; color: #e8eaec; line-height: 1; }

/* ===== Compact mode (optional) ===== */
.volvo-connect.compact .main-card { padding: 10px; }
.volvo-connect.compact .vc-toprow { gap: 6px; }
.volvo-connect.compact .vc-leftstack { gap: 2px; }
.volvo-connect.compact .vc-carbox .car-image { max-height: 80px; }
.volvo-connect.compact .fuelbar { height: 10px; }
.volvo-connect.compact .leaflet-holder { height: 140px; }

/* 4) Make the car hug the top and remove image baseline gap */
.vc-carbox {
  display: flex;
  justify-content: flex-end;
  align-items: flex-start;    /* push image to the top of its cell */
  margin-top: -10px;           /* subtle nudge up */
}

.vc-carbox .car-image {
  width: auto;
  max-height: 115px;              /* keep nominal size */
  object-fit: cover;              /* zoom inside instead of contain */
  object-position: center top;    /* focus on top of car */
  transform: scale(2.8) translateY(-24px) translateX(-11px);
  transform-origin: top center;   /* prevent bottom from overflowing */
}



.volvo-connect .vc-updated {
  text-align: right;
  font-size: 10px;
  opacity: 0.6;
  color: #cccccc;
  margin-top: 4px;
}
